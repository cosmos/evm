# Cosmos EVM v0.5.0 â†’ v0.6.0 Migration

## 0) Prep

- Create a branch: `git switch -c upgrade/evm-v0.6`.
- Ensure a clean build + tests green pre-upgrade.
- Snapshot your current params/genesis for comparison later.

---

## 1) Dependency bumps (go.mod)

- Bump `github.com/cosmos/evm` to v0.6.0 and run:

```bash
go mod tidy
```

---

<!-- TODO: Other changes required for the upgrade -->

## 3) App wiring in `app.go`

### Default Precompiles

We added a new default precompile, ICS-02 Client Router. As such, the function signature for `DefaultStaticPrecompiles` has changed to accept a `clientKeeper` parameter.

```diff
	app.EVMKeeper = evmkeeper.NewKeeper(
		appCodec, keys[evmtypes.StoreKey], tkeys[evmtypes.TransientKey], keys,
		authtypes.NewModuleAddress(govtypes.ModuleName),
		app.AccountKeeper,
		app.PreciseBankKeeper,
		app.StakingKeeper,
		app.FeeMarketKeeper,
		&app.ConsensusParamsKeeper,
		&app.Erc20Keeper,
		evmChainID,
		tracer,
	).WithStaticPrecompiles(
		precompiletypes.DefaultStaticPrecompiles(
			*app.StakingKeeper,
			app.DistrKeeper,
			app.PreciseBankKeeper,
			&app.Erc20Keeper,
			&app.TransferKeeper,
			app.IBCKeeper.ChannelKeeper,
+			app.IBCKeeper.ClientKeeper,
			app.GovKeeper,
			app.SlashingKeeper,
			appCodec,
		),
	)
```
